name: GitHub → Discord Notifier

on:
  pull_request:
    types: [opened, closed]   # PR 생성, 머지/닫힘
  issues:
    types: [closed]           # 이슈가 닫혔을 때

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Notify Discord
        uses: nebularg/actions-discord-webhook@v1.0.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK }}
          username: "GitHub Bot"
          content: |
            ${{ github.event_name == 'pull_request' && github.event.action == 'opened' && '📌 새로운 Pull Request가 생성되었습니다!' || '' }}
            ${{ github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged && '✅ Pull Request가 머지되었습니다!' || '' }}
            ${{ github.event_name == 'issues' && github.event.action == 'closed' && '🎉 이슈가 처리(Closed)되었습니다!' || '' }}
